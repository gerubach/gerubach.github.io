---
layout: post
title: Web Scraping Example
---

In this post I will show you how to scrape webpages:

```python
def parse(self, response):
    """
    navigates to the "Cast and Crew" page of Young Justice (https://www.imdb.com/title/tt1641384/fullcredits/?ref_=tt_ql_cl) and then calls parse_full_credits
    """
    yield scrapy.Request("https://www.imdb.com/title/tt1641384/fullcredits/?ref_=tt_ql_cl", self.parse_full_credits)
```

```python
def parse_full_credits(self, response):
    """
    navigates to each Young Justice actor's page and then calls parse_actor_page
    """
    #loops through relative paths of each Young Justice actor's page
    for link in [a.attrib["href"] for a in response.css("td.primary_photo a")]:
        #add relative path to page url and navigate there. Then call parse_actor_page
        yield scrapy.Request(response.urljoin(link), callback=self.parse_actor_page)
```

```python
def parse_actor_page(self, response):
    #get the actor name on the page (the string concatenation deletes " - IMDb" from the end of the name)
    name = response.css("title::text").get()[:-7]

    #loop through each show linked on the actor's page under Filmography
    for item in response.css("div.filmo-row"):
        #get name of the show
        show_name = item.css("b a::text").get()

        #output dictionary containing actor name and the show they star in
        yield {
            "actor" : name,
            "movie_or_TV_name" : show_name
        }
```

Let's see what the final table of results looks like:
![graph](/images/blog_post_2_table.png)

Here is a bar graph of the 5 TV shows and movies with the greatest number of shared actors:

![graph](/images/blog_post_2_bar_plot.png)